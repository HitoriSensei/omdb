# NextJS starter kit

@maintainer `piotr.bosak@vmlyr.com`

## Hey, you!

Do not clone this repo to start a new project!

[Fork it](https://git.pride.gl/piotr.bosak/nextjs-starter/-/forks/new) or add it as an [additional remote](#add-to-your-project-repo) to [already existing project repo](#add-to-your-project-repo) instead.

# Examples
Check out the [examples branch](https://git.pride.gl/piotr.bosak/nextjs-starter/-/tree/examples)

# Structure
Everthing except for `pages`, `vendor`, `config` and `public` is your playground

* `pages` - **required** contains directory driven routing and contents of your pages. Check [NextJS routing](https://nextjs.org/docs/routing/introduction) for more info.

* `public` - **required** files that will be statically served. Useful for resources like fonts.\

* `vendor` - **required** contains starter provided tools and components\
\
You **should not** modify files inside this directory if you want to be able to **receive framework updates without merge conflicts**

* `config/public.json` - **required** Data from this file will be presented to client code. \
**NEVER PUT ANY CONFIDENTIAL DATA LIKE API PASSWORDS HERE**.\
For such things use `config/private.json`.\
\
Contains config files that should contain all your public app parameters, like an API endpoint root.
 
* `config/private.json` - **required** Contains configuration data that will only be available to server-side rendering. You may use confidential data here. 

## Add to your project repo
**It's always best to add starter to an empty repo to avoid conflicts**

### Before you begin
* starter can be added only to **git repo root**. \
If you have for ex. `my_project/frontend` directory and you want to initialize starter in `frontend` directory **it won't work**\.
It must be initialized in **git root directory**.

If you have already created a repo for your project you can add the starter to it using additional remote:

Add new remote
```
cd my_project
git remote add framework git@git.pride.gl:piotr.bosak/nextjs-starter.git
```

Merge framework into branch
```
git fetch framework
git merge framework/master --allow-unrelated-histories
``` 

# Updating framework
If you want to pull updates to the framework just pull the changes:
```
git fetch framework master
git merge framework/master
```

# Mods!
Starter kit is designed to be moddable and extensible.

To add a mod simply merge it into you application, eg:
```
git merge framework/mods/i18n-poeditor-com
```

## Updating mods code
The procedure is the same as for regular framework update, but merge mod branch instead:
```
git fetch framework
git merge framework/mods/i18n-poeditor-com
```

## Where to search for mods?
Check [Mods branches](https://git.pride.gl/piotr.bosak/nextjs-starter/-/branches/all?utf8=%E2%9C%93&search=mods%2F) for available mods.

Some mods may require extending you application config with required parameters (checked by PrivateConfig and PublicConfig interfaces).

Examples include:

* `git merge framework/mods/i18n-poeditor-com`\
Adds `react-t7n` translation to your app directly from translation project on https://poeditor.com/ 
* `git merge framework/mods/sitemap`\
Adds autogenerated sitemap at `/sitemap.xml` to your project 

## Creating a mod
### @TODO: Mods API documentation

Create your mod in `vendor/mods` directory.

**NOTE**: You should not modify files outsite of `vendor/mods` (except root `package.json`) unless strictly necessary. This should reduce number of conflicts when applying mods to minimum.

Publish to a new branch starting with `mods/` eg. `

# Contribute
Do you have a component or an idea for a component that can be reused in other projects?

Have you found a bug and want to submit a patch?

## Create a merge request!

It's extremely simple.

Recipe:
* Clone the starter repository \
`git clone git@git.pride.gl:piotr.bosak/nextjs-starter.git`
* Checkout master branch\
`cd nextjs-starter`\
`git checkout master`
* Create patch branch
`git checkout -b patch-fixes-modal-bug`
or
`git checkout -b feature-mobile-menu-component`
* Make changes, commit, push
* Create a [merge request](https://git.pride.gl/piotr.bosak/nextjs-starter/-/merge_requests/new?merge_request%5Bsource_project_id%5D=1310&merge_request%5Btarget_branch%5D=master&merge_request%5Btarget_project_id%5D=1310)
